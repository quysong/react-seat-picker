{"version":3,"file":"index.es.js","sources":["../src/SeatPicker/RowNumber.js","../src/SeatPicker/Row.js","../src/SeatPicker/Seat.js","../src/SeatPicker/Blank.js","../src/SeatPicker/SeatPicker.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class RowNumber extends Component {\n  static propTypes = {\n    rowNumber: PropTypes.string,\n    visible: PropTypes.bool,\n  };\n\n  render() {\n    return this.props.visible ? (\n      <div className=\"seat-picker__row__number\">{this.props.rowNumber}</div>\n    ) : null;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport RowNumber from \"./RowNumber\";\n\nexport default class Row extends Component {\n  static propTypes = {\n    rowNumber: PropTypes.string,\n    visible: PropTypes.bool,\n    isSelected: PropTypes.bool,\n    children: PropTypes.array,\n  };\n\n  render() {\n    const { visible, rowNumber, isSelected } = this.props;\n    const className =\n      \"seat-picker__row\" +\n      (isSelected\n        ? \" seat-picker__row--selected\"\n        : \" seat-picker__row--enabled\");\n    return (\n      <div className={className}>\n        <RowNumber rowNumber={rowNumber} visible={visible} />\n        {this.props.children}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport default class Seat extends Component {\n  static defaultProps = {\n    isSelected: false,\n  };\n\n  handleClick = () => {\n    !this.props.isReserved && this.props.selectSeat();\n  };\n\n  render() {\n    const {\n      isSelected,\n      tooltip,\n      isEnabled,\n      isReserved,\n      orientation,\n    } = this.props;\n    const className =\n      \"seat\" +\n      (isSelected ? \" seat--selected\" : \"\") +\n      (!isSelected && isEnabled && !isReserved ? \" seat--enabled\" : \"\") +\n      (isReserved ? \" seat--reserved\" : \"\") +\n      ` seat--${!orientation ? \"north\" : orientation}`;\n    return (\n      <div data-tip={tooltip} className={className} onClick={this.handleClick}>\n        <span className=\"seat__number\">{this.props.seatNumber}</span>\n      </div>\n    );\n  }\n}\n\nSeat.propTypes = {\n  isSelected: PropTypes.bool,\n  isReserved: PropTypes.bool,\n  tooltip: PropTypes.string,\n  isEnabled: PropTypes.bool,\n  orientation: PropTypes.oneOf([\"north\", \"south\", \"east\", \"west\"]),\n  seatNumber: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  selectSeat: PropTypes.func.isRequired,\n};\n","import React, { Component } from \"react\";\n\nexport default class Blank extends Component {\n  render() {\n    return <div className=\"blank\" />;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Row from \"./Row\";\nimport Seat from \"./Seat\";\nimport Blank from \"./Blank\";\n\nexport class SeatPicker extends Component {\n  static defaultProps = {\n    addSeatCallback: ({ row, number, id }, addCb, isCustomClick) => {\n      if (!isCustomClick) {\n        addCb(row, number, id);\n      }\n    },\n    removeSeatCallback: ({ row, number, id }, removeCb, isCustomClick) => {\n      if (!isCustomClick) {\n        removeCb(row, number);\n      }\n    },\n    maxReservableSeats: 0,\n  };\n\n  constructor(props) {\n    super(props);\n    const { rows } = props;\n    const { selectedSeats, size } = this.getAlreadySelectedSeats();\n    this.state = {\n      tooltipOverrides: {},\n      selectedSeats: selectedSeats,\n      size: size,\n      rowLength: Math.max.apply(\n        null,\n        rows.map(row => row.length)\n      ),\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.maxReservableSeats < state.size) {\n      let sum = 0;\n      const selectedSeats = {};\n      for (const array in state.selectedSeats) {\n        if (\n          sum + state.selectedSeats[array].length <\n          props.maxReservableSeats\n        ) {\n          selectedSeats[array] = state.selectedSeats[array].slice(0);\n        } else {\n          const dif = props.maxReservableSeats - sum;\n          selectedSeats[array] = state.selectedSeats[array].slice(0, dif);\n          return {\n            selectedSeats: selectedSeats,\n            size: props.maxReservableSeats,\n          };\n        }\n        sum = sum + state.selectedSeats[array].length;\n      }\n    }\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      nextState.selectedSeats !== this.state.selectedSeats ||\n      this.props.loading !== nextProps.loading\n    );\n  }\n\n  getAlreadySelectedSeats = () => {\n    let selectedSeats = {};\n    let size = 0;\n    const { maxReservableSeats, alpha, selectedByDefault } = this.props;\n    if (selectedByDefault) {\n      this.props.rows.forEach((row, index) => {\n        const rowNumber = alpha\n          ? String.fromCharCode(\"A\".charCodeAt(0) + index)\n          : (index + 1).toString();\n        row.forEach((seat, index) => {\n          if (seat && seat.isSelected) {\n            const seatAlreadySelected = this.includeSeat(\n              selectedSeats,\n              rowNumber,\n              seat.number\n            );\n            if (size < maxReservableSeats && !seatAlreadySelected) {\n              selectedSeats = this.addSeat(\n                selectedSeats,\n                rowNumber,\n                seat.number,\n                seat.id\n              );\n              size = size + 1;\n            }\n          }\n        });\n      });\n    }\n    return { selectedSeats, size };\n  };\n\n  includeSeat = (selectedSeats, row, number) => {\n    if (selectedSeats[row]) {\n      return !!selectedSeats[row][number];\n    }\n    return false;\n  };\n\n  addSeat = (selectedSeats, row, number, id) => {\n    if (selectedSeats[row]) {\n      if (!selectedSeats[row][number]) {\n        selectedSeats[row][number] = id;\n      }\n    } else {\n      selectedSeats[row] = {};\n      selectedSeats[row][number] = id;\n    }\n    return { ...selectedSeats };\n  };\n\n  deleteSeat = (row, number) => {\n    const { selectedSeats } = this.state;\n    if (selectedSeats[row]) {\n      delete selectedSeats[row][number];\n      if (!Object.keys(selectedSeats[row]).length > 0) {\n        delete selectedSeats[row];\n      }\n    }\n    return { ...selectedSeats };\n  };\n\n  addTooltip = (tooltipOverrides, row, number, tooltip) => {\n    if (!tooltipOverrides[row]) {\n      tooltipOverrides[row] = {};\n    }\n    tooltipOverrides[row][number] = tooltip;\n    return { ...tooltipOverrides };\n  };\n\n  acceptSelection = (row, number, id, tooltip) => {\n    const { selectedSeats, tooltipOverrides, size } = this.state;\n    const { maxReservableSeats } = this.props;\n    if (size < maxReservableSeats) {\n      this.setState({\n        tooltipOverrides: this.addTooltip(\n          tooltipOverrides,\n          row,\n          number,\n          tooltip\n        ),\n        selectedSeats: this.addSeat(selectedSeats, row, number, id),\n        size: size + 1,\n      });\n    }\n  };\n\n  acceptDeselection = (row, number, tooltip) => {\n    const { size, tooltipOverrides } = this.state;\n    this.setState({\n      tooltipOverrides: this.addTooltip(tooltipOverrides, row, number, tooltip),\n      selectedSeats: this.deleteSeat(row, number),\n      size: size - 1,\n    });\n  };\n\n  selectSeat = (row, number, id) => {\n    const { selectedSeats } = this.state;\n    const size = this.state.size;\n    const {\n      maxReservableSeats,\n      addSeatCallback,\n      removeSeatCallback,\n      continuous,\n    } = this.props;\n    const seatAlreadySelected = this.includeSeat(selectedSeats, row, number);\n\n    if (seatAlreadySelected) {\n      removeSeatCallback({ row, number, id }, this.acceptDeselection);\n    } else {\n      if (size < maxReservableSeats) {\n        addSeatCallback({ row, number, id }, this.acceptSelection);\n      } else if (continuous) {\n        const auxRow = Object.keys(selectedSeats)[0];\n        const auxNumber = Object.keys(selectedSeats[auxRow])[0];\n        addSeatCallback(\n          { row, number, id },\n          this.acceptSelection,\n          {\n            row: auxRow,\n            number: auxNumber,\n            id: selectedSeats[auxRow][auxNumber],\n          },\n          this.acceptDeselection\n        );\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div className=\"seat-content\">\n        <div className={this.props.loading ? \"loader\" : null} />\n        <div className=\"seat-picker\">{this.renderRows()}</div>\n      </div>\n    );\n  }\n\n  renderRows() {\n    const { selectedSeats: seats } = this.state;\n    const { alpha, visible } = this.props;\n    return this.props.rows.map((row, index) => {\n      const rowNumber = alpha\n        ? String.fromCharCode(\"A\".charCodeAt(0) + index)\n        : (index + 1).toString();\n      const isSelected = !!seats[rowNumber];\n      const props = {\n        visible,\n        rowNumber,\n        isSelected,\n        selectedSeat: null,\n        seats: row,\n        // key: `Row${rowNumber}`,\n        selectSeat: this.selectSeat,\n      };\n\n      return (\n        <Row key={index} {...props}>\n          {this.renderSeats(row, rowNumber, isSelected)}{\" \"}\n        </Row>\n      );\n    });\n  }\n\n  renderSeats(seats, rowNumber, isRowSelected) {\n    const { selectedSeats, size, rowLength, tooltipOverrides } = this.state;\n    const { maxReservableSeats, continuous } = this.props;\n    const blanks = new Array(\n      rowLength - seats.length > 0 ? rowLength - seats.length : 0\n    ).fill(0);\n    const row = seats.map((seat, index) => {\n      if (seat === null) return <Blank key={index} />;\n      const isSelected =\n        isRowSelected &&\n        this.includeSeat(selectedSeats, rowNumber, seat.number);\n      let tooltip = seat.tooltip;\n      if (\n        tooltipOverrides[rowNumber] &&\n        tooltipOverrides[rowNumber][seat.number] != null\n      ) {\n        tooltip = tooltipOverrides[rowNumber][seat.number];\n      }\n      const props = {\n        isSelected,\n        orientation: seat.orientation,\n        isReserved: seat.isReserved,\n        tooltip,\n        isEnabled: size < maxReservableSeats || continuous,\n        selectSeat: this.selectSeat.bind(this, rowNumber, seat.number, seat.id),\n        seatNumber: seat.number,\n        tooltipProps: this.props.tooltipProps,\n      };\n      return <Seat key={index} {...props} />;\n    });\n    if (blanks.length > 0) {\n      blanks.forEach((blank, index) => {\n        row.push(<Blank key={row.length + index + 1} />);\n      });\n    }\n    return row;\n  }\n}\n\nSeatPicker.propTypes = {\n  addSeatCallback: PropTypes.func,\n  alpha: PropTypes.bool,\n  visible: PropTypes.bool,\n  continuous: PropTypes.bool,\n  selectedByDefault: PropTypes.bool,\n  removeSeatCallback: PropTypes.func,\n  maxReservableSeats: PropTypes.number,\n  rows: PropTypes.arrayOf(\n    PropTypes.arrayOf(\n      PropTypes.shape({\n        number: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n        isReserved: PropTypes.bool,\n        tooltip: PropTypes.string,\n        isSelected: PropTypes.bool,\n      })\n    )\n  ).isRequired,\n  tooltipProps: PropTypes.object,\n  loading: PropTypes.bool,\n};\n"],"names":["RowNumber","props","visible","rowNumber","Component","PropTypes","string","bool","Row","isSelected","className","children","array","Seat","isReserved","selectSeat","tooltip","isEnabled","orientation","handleClick","seatNumber","propTypes","oneOf","oneOfType","number","func","isRequired","Blank","SeatPicker","selectedSeats","size","maxReservableSeats","alpha","selectedByDefault","rows","forEach","row","index","String","fromCharCode","charCodeAt","toString","seat","seatAlreadySelected","includeSeat","addSeat","id","state","Object","keys","length","tooltipOverrides","setState","addTooltip","deleteSeat","addSeatCallback","removeSeatCallback","continuous","acceptDeselection","acceptSelection","auxRow","auxNumber","getAlreadySelectedSeats","rowLength","Math","max","apply","map","nextProps","nextState","loading","renderRows","seats","selectedSeat","renderSeats","isRowSelected","blanks","Array","fill","bind","tooltipProps","blank","push","sum","slice","dif","addCb","isCustomClick","removeCb","arrayOf","shape","object"],"mappings":"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"}